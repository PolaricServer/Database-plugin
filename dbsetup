 
Sette opp database med postgis
------------------------------


Installer postgresql
apt-get install postgresql postgresql-contrib postgresql-client

Og postgis:
apt-get install postgis libpostgis-java

Opprett en database <dbname> og installer postgis:
(foresl√•r databasenavn polaric og brukernavn polaric og passord polarichacker

  # Become a postgresql superuser
  su - postgres

  # Create the user (allowed to log in and with password)
  # FIXME/CHECK: CAN USER LOGIN VIA TCP?
  createuser <username> -l -e -P

  # Enter password: <type the user password>
  # Enter it again: <type the user password>

  # create database ownered by user 
  createdb <databasename> -O <username>

  # Need to enable plpgsql for the database before loading the functions  # DO THIS IN V. 9.1???
  # Not necessary in v. 9.6 and later
  createlang plpgsql -d <databasename>

  
  # Finally, load the functions and reference system tables
  # Note. Version number may change. Check it first! 
  #
  psql <databasename> -f /usr/share/postgresql/11/contrib/postgis-2.5/postgis.sql
  psql <databasename> -f /usr/share/postgresql/11/contrib/postgis-2.5/spatial_ref_sys.sql
    

  # login in new database (still as superuser postgres)
  psql <databasename>

  # grant privilege on standard ogc tables to user
  grant all on geometry_columns to <username>;
  grant select on spatial_ref_sys to <username>;
  
  
  
  
  
  
  
  
  
  
  
FLYTTE DATABASE?
----------------

pg_dump -Fc polaric > polaric.dump

..move file
..create user and database like indicated above

pg_restore -d polaric polaric.dump








FIXME: 


java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePacket(DatabasePlugin.java:305)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:149)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:52 ERROR: handlePacket: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePacket(DatabasePlugin.java:305)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:149)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePosReport: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePosReport(DatabasePlugin.java:235)
        at no.polaric.aprsd.AprsParser.parseMicE(AprsParser.java:521)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:126)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePosReport: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePosReport(DatabasePlugin.java:235)
        at no.polaric.aprsd.AprsParser.parseMicE(AprsParser.java:521)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:126)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePacket: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePacket(DatabasePlugin.java:305)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:149)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePacket: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePacket(DatabasePlugin.java:305)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:149)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePosReport: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePosReport(DatabasePlugin.java:235)
        at no.polaric.aprsd.AprsParser.parseStdAprs(AprsParser.java:781)
        at no.polaric.aprsd.AprsParser.parseObjectReport(AprsParser.java:302)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:115)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePosReport: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePosReport(DatabasePlugin.java:235)
        at no.polaric.aprsd.AprsParser.parseStdAprs(AprsParser.java:781)
        at no.polaric.aprsd.AprsParser.parseObjectReport(AprsParser.java:302)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:115)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePacket: java.lang.NullPointerException
java.lang.NullPointerException
        at no.polaric.aprsdb.DatabasePlugin.handlePacket(DatabasePlugin.java:305)
        at no.polaric.aprsd.AprsParser.receivePacket(AprsParser.java:149)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:315)
        at no.polaric.aprsd.AprsChannel.receivePacket(AprsChannel.java:279)
        at no.polaric.aprsd.InetChannel.receiveLoop(InetChannel.java:106)
        at no.polaric.aprsd.TcpChannel.run(TcpChannel.java:174)
        at java.base/java.lang.Thread.run(Thread.java:834)
jan. 31 14:27:54 ERROR: handlePacket: java.lang.NullPointerException
ja
